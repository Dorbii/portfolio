import{a as P,_ as j}from"./@babel-6xVxzmvl.js";import{useState as z,useEffect as v,forwardRef as Q,useRef as X,useImperativeHandle as Y}from"react";import{c as Z,d as $,s as ee,h as te,f as ae,a as re,l as oe,b as ie,e as ne,g as se,i as le,j as ce,k as fe,m as ue,E as O,n as de,o as U,p as ge,q as he,r as me,t as pe,u as be,v as ye,w as ve,x as Se,y as ke,z as V,A as g,B as xe,C as Ce,D as Ne,S as Me,F as Be,H as Ke}from"./@codemirror-DHlsbjy8.js";import{j as We}from"./react-DODB02uq.js";import{a as e}from"./@lezer-CCSus8NM.js";var G=function(t){t===void 0&&(t={});var{crosshairCursor:a=!1}=t,o=[];t.closeBracketsKeymap!==!1&&(o=o.concat(Z)),t.defaultKeymap!==!1&&(o=o.concat($)),t.searchKeymap!==!1&&(o=o.concat(ee)),t.historyKeymap!==!1&&(o=o.concat(te)),t.foldKeymap!==!1&&(o=o.concat(ae)),t.completionKeymap!==!1&&(o=o.concat(re)),t.lintKeymap!==!1&&(o=o.concat(oe));var r=[];return t.lineNumbers!==!1&&r.push(ie()),t.highlightActiveLineGutter!==!1&&r.push(ne()),t.highlightSpecialChars!==!1&&r.push(se()),t.history!==!1&&r.push(le()),t.foldGutter!==!1&&r.push(ce()),t.drawSelection!==!1&&r.push(fe()),t.dropCursor!==!1&&r.push(ue()),t.allowMultipleSelections!==!1&&r.push(O.allowMultipleSelections.of(!0)),t.indentOnInput!==!1&&r.push(de()),t.syntaxHighlighting!==!1&&r.push(U(ge,{fallback:!0})),t.bracketMatching!==!1&&r.push(he()),t.closeBrackets!==!1&&r.push(me()),t.autocompletion!==!1&&r.push(pe()),t.rectangularSelection!==!1&&r.push(be()),a!==!1&&r.push(ye()),t.highlightActiveLine!==!1&&r.push(ve()),t.highlightSelectionMatches!==!1&&r.push(Se()),t.tabSize&&typeof t.tabSize=="number"&&r.push(ke.of(" ".repeat(t.tabSize))),r.concat([V.of(o.flat())]).filter(Boolean)},Ee=g.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Fe=function(t){t===void 0&&(t={});var{indentWithTab:a=!0,editable:o=!0,readOnly:r=!1,theme:l="light",placeholder:c="",basicSetup:u=!0}=t,s=[];switch(a&&s.unshift(V.of([xe])),u&&(typeof u=="boolean"?s.unshift(G()):s.unshift(G(u))),c&&s.unshift(Ce(c)),l){case"light":s.push(Ee);break;case"dark":s.push(Ne);break;case"none":break;default:s.push(l);break}return o===!1&&s.push(g.editable.of(!1)),r&&s.push(O.readOnly.of(!0)),[...s]},He=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(t=>i.state.sliceDoc(t.from,t.to)),selectedText:i.state.selection.ranges.some(t=>!t.empty)}),R=Be.define(),Le=[];function Ae(i){var{value:t,selection:a,onChange:o,onStatistics:r,onCreateEditor:l,onUpdate:c,extensions:u=Le,autoFocus:s,theme:h="light",height:C=null,minHeight:m=null,maxHeight:N=null,width:M=null,minWidth:B=null,maxWidth:K=null,placeholder:W="",editable:E=!0,readOnly:F=!1,indentWithTab:H=!0,basicSetup:L=!0,root:w,initialState:S}=i,[p,A]=z(),[n,d]=z(),[b,y]=z(),I=g.theme({"&":{height:C,minHeight:m,maxHeight:N,width:M,minWidth:B,maxWidth:K},"& .cm-scroller":{height:"100% !important"}}),T=g.updateListener.of(f=>{if(f.docChanged&&typeof o=="function"&&!f.transactions.some(J=>J.annotation(R))){var x=f.state.doc,D=x.toString();o(D,f)}r&&r(He(f))}),q=Fe({theme:h,editable:E,readOnly:F,placeholder:W,indentWithTab:H,basicSetup:L}),k=[T,I,...q];return c&&typeof c=="function"&&k.push(g.updateListener.of(c)),k=k.concat(u),v(()=>{if(p&&!b){var f={doc:t,selection:a,extensions:k},x=S?O.fromJSON(S.json,f,S.fields):O.create(f);if(y(x),!n){var D=new g({state:x,parent:p,root:w});d(D),l&&l(D,x)}}return()=>{n&&(y(void 0),d(void 0))}},[p,b]),v(()=>A(i.container),[i.container]),v(()=>()=>{n&&(n.destroy(),d(void 0))},[n]),v(()=>{s&&n&&n.focus()},[s,n]),v(()=>{n&&n.dispatch({effects:Me.reconfigure.of(k)})},[h,u,C,m,N,M,B,K,W,E,F,H,L,o,c]),v(()=>{if(t!==void 0){var f=n?n.state.doc.toString():"";n&&t!==f&&n.dispatch({changes:{from:0,to:f.length,insert:t||""},annotations:[R.of(!0)]})}},[t,n]),{state:b,setState:y,view:n,setView:d,container:p,setContainer:A}}var De=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Oe=Q((i,t)=>{var{className:a,value:o="",selection:r,extensions:l=[],onChange:c,onStatistics:u,onCreateEditor:s,onUpdate:h,autoFocus:C,theme:m="light",height:N,minHeight:M,maxHeight:B,width:K,minWidth:W,maxWidth:E,basicSetup:F,placeholder:H,indentWithTab:L,editable:w,readOnly:S,root:p,initialState:A}=i,n=P(i,De),d=X(null),{state:b,view:y,container:I}=Ae({container:d.current,root:p,value:o,autoFocus:C,theme:m,height:N,minHeight:M,maxHeight:B,width:K,minWidth:W,maxWidth:E,basicSetup:F,placeholder:H,indentWithTab:L,editable:w,readOnly:S,selection:r,onChange:c,onStatistics:u,onCreateEditor:s,onUpdate:h,extensions:l,initialState:A});if(Y(t,()=>({editor:d.current,state:b,view:y}),[d,I,b,y]),typeof o!="string")throw new Error("value must be typeof string but got "+typeof o);var T=typeof m=="string"?"cm-theme-"+m:"cm-theme";return We.jsx("div",j({ref:d,className:""+T+(a?" "+a:"")},n))});Oe.displayName="CodeMirror";var _=i=>{var{theme:t,settings:a={},styles:o=[]}=i,r={".cm-gutters":{}},l={};a.background&&(l.backgroundColor=a.background),a.backgroundImage&&(l.backgroundImage=a.backgroundImage),a.foreground&&(l.color=a.foreground),a.fontSize&&(l.fontSize=a.fontSize),(a.background||a.foreground)&&(r["&"]=l),a.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:a.fontFamily}),a.gutterBackground&&(r[".cm-gutters"].backgroundColor=a.gutterBackground),a.gutterForeground&&(r[".cm-gutters"].color=a.gutterForeground),a.gutterBorder&&(r[".cm-gutters"].borderRightColor=a.gutterBorder),a.caret&&(r[".cm-content"]={caretColor:a.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:a.caret});var c={};a.gutterActiveForeground&&(c.color=a.gutterActiveForeground),a.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:a.lineHighlight},c.backgroundColor=a.lineHighlight),r[".cm-activeLineGutter"]=c,a.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:a.selection+" !important"}),a.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:a.selectionMatch});var u=g.theme(r,{dark:t==="dark"}),s=Ke.define(o),h=[u,U(s)];return h},we={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Ie=[{tag:[e.keyword,e.operatorKeyword,e.modifier,e.color,e.constant(e.name),e.standard(e.name),e.standard(e.tagName),e.special(e.brace),e.atom,e.bool,e.special(e.variableName)],color:"#0000ff"},{tag:[e.moduleKeyword,e.controlKeyword],color:"#af00db"},{tag:[e.name,e.deleted,e.character,e.macroName,e.propertyName,e.variableName,e.labelName,e.definition(e.name)],color:"#0070c1"},{tag:e.heading,fontWeight:"bold",color:"#0070c1"},{tag:[e.typeName,e.className,e.tagName,e.number,e.changed,e.annotation,e.self,e.namespace],color:"#267f99"},{tag:[e.function(e.variableName),e.function(e.propertyName)],color:"#795e26"},{tag:[e.number],color:"#098658"},{tag:[e.operator,e.punctuation,e.separator,e.url,e.escape,e.regexp],color:"#383a42"},{tag:[e.regexp],color:"#af00db"},{tag:[e.special(e.string),e.processingInstruction,e.string,e.inserted],color:"#a31515"},{tag:[e.angleBracket],color:"#383a42"},{tag:e.strong,fontWeight:"bold"},{tag:e.emphasis,fontStyle:"italic"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:[e.meta,e.comment],color:"#008000"},{tag:e.link,color:"#4078f2",textDecoration:"underline"},{tag:e.invalid,color:"#e45649"}];function Te(i){var{theme:t="light",settings:a={},styles:o=[]}={};return _({theme:t,settings:j({},we,a),styles:[...Ie,...o]})}Te();var ze={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},je=[{tag:[e.keyword,e.operatorKeyword,e.modifier,e.color,e.constant(e.name),e.standard(e.name),e.standard(e.tagName),e.special(e.brace),e.atom,e.bool,e.special(e.variableName)],color:"#569cd6"},{tag:[e.controlKeyword,e.moduleKeyword],color:"#c586c0"},{tag:[e.name,e.deleted,e.character,e.macroName,e.propertyName,e.variableName,e.labelName,e.definition(e.name)],color:"#9cdcfe"},{tag:e.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[e.typeName,e.className,e.tagName,e.number,e.changed,e.annotation,e.self,e.namespace],color:"#4ec9b0"},{tag:[e.function(e.variableName),e.function(e.propertyName)],color:"#dcdcaa"},{tag:[e.number],color:"#b5cea8"},{tag:[e.operator,e.punctuation,e.separator,e.url,e.escape,e.regexp],color:"#d4d4d4"},{tag:[e.regexp],color:"#d16969"},{tag:[e.special(e.string),e.processingInstruction,e.string,e.inserted],color:"#ce9178"},{tag:[e.angleBracket],color:"#808080"},{tag:e.strong,fontWeight:"bold"},{tag:e.emphasis,fontStyle:"italic"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:[e.meta,e.comment],color:"#6a9955"},{tag:e.link,color:"#6a9955",textDecoration:"underline"},{tag:e.invalid,color:"#ff0000"}];function Ge(i){var{theme:t="dark",settings:a={},styles:o=[]}={};return _({theme:t,settings:j({},ze,a),styles:[...je,...o]})}var Je=Ge();export{Oe as R,Je as v};
