import{a as J,_ as z}from"./@babel-6xVxzmvl.js";import{r as f,j as P}from"./react-DxQbs3dX.js";import{c as Q,d as X,s as Y,h as Z,f as $,a as ee,l as te,b as ae,e as re,g as oe,i as ie,j as ne,k as se,m as ce,E as O,n as le,o as R,p as fe,q as ue,r as de,t as ge,u as he,v as me,w as pe,x as be,y as ye,z as U,A as h,B as ve,C as Se,D as ke,S as xe,F as Ce,H as Ne}from"./@codemirror-DHlsbjy8.js";import{a as e}from"./@lezer-CCSus8NM.js";var j=function(t){t===void 0&&(t={});var{crosshairCursor:a=!1}=t,o=[];t.closeBracketsKeymap!==!1&&(o=o.concat(Q)),t.defaultKeymap!==!1&&(o=o.concat(X)),t.searchKeymap!==!1&&(o=o.concat(Y)),t.historyKeymap!==!1&&(o=o.concat(Z)),t.foldKeymap!==!1&&(o=o.concat($)),t.completionKeymap!==!1&&(o=o.concat(ee)),t.lintKeymap!==!1&&(o=o.concat(te));var r=[];return t.lineNumbers!==!1&&r.push(ae()),t.highlightActiveLineGutter!==!1&&r.push(re()),t.highlightSpecialChars!==!1&&r.push(oe()),t.history!==!1&&r.push(ie()),t.foldGutter!==!1&&r.push(ne()),t.drawSelection!==!1&&r.push(se()),t.dropCursor!==!1&&r.push(ce()),t.allowMultipleSelections!==!1&&r.push(O.allowMultipleSelections.of(!0)),t.indentOnInput!==!1&&r.push(le()),t.syntaxHighlighting!==!1&&r.push(R(fe,{fallback:!0})),t.bracketMatching!==!1&&r.push(ue()),t.closeBrackets!==!1&&r.push(de()),t.autocompletion!==!1&&r.push(ge()),t.rectangularSelection!==!1&&r.push(he()),a!==!1&&r.push(me()),t.highlightActiveLine!==!1&&r.push(pe()),t.highlightSelectionMatches!==!1&&r.push(be()),t.tabSize&&typeof t.tabSize=="number"&&r.push(ye.of(" ".repeat(t.tabSize))),r.concat([U.of(o.flat())]).filter(Boolean)},Ee=h.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Me=function(t){t===void 0&&(t={});var{indentWithTab:a=!0,editable:o=!0,readOnly:r=!1,theme:c="light",placeholder:l="",basicSetup:d=!0}=t,s=[];switch(a&&s.unshift(U.of([ve])),d&&(typeof d=="boolean"?s.unshift(j()):s.unshift(j(d))),l&&s.unshift(Se(l)),c){case"light":s.push(Ee);break;case"dark":s.push(ke);break;case"none":break;default:s.push(c);break}return o===!1&&s.push(h.editable.of(!1)),r&&s.push(O.readOnly.of(!0)),[...s]},Be=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(t=>i.state.sliceDoc(t.from,t.to)),selectedText:i.state.selection.ranges.some(t=>!t.empty)}),G=Ce.define(),Ke=[];function We(i){var{value:t,selection:a,onChange:o,onStatistics:r,onCreateEditor:c,onUpdate:l,extensions:d=Ke,autoFocus:s,theme:m="light",height:C=null,minHeight:p=null,maxHeight:N=null,width:E=null,minWidth:M=null,maxWidth:B=null,placeholder:K="",editable:W=!0,readOnly:F=!1,indentWithTab:H=!0,basicSetup:L=!0,root:w,initialState:S}=i,[b,A]=f.useState(),[n,g]=f.useState(),[y,v]=f.useState(),I=h.theme({"&":{height:C,minHeight:p,maxHeight:N,width:E,minWidth:M,maxWidth:B},"& .cm-scroller":{height:"100% !important"}}),T=h.updateListener.of(u=>{if(u.docChanged&&typeof o=="function"&&!u.transactions.some(q=>q.annotation(G))){var x=u.state.doc,D=x.toString();o(D,u)}r&&r(Be(u))}),_=Me({theme:m,editable:W,readOnly:F,placeholder:K,indentWithTab:H,basicSetup:L}),k=[T,I,..._];return l&&typeof l=="function"&&k.push(h.updateListener.of(l)),k=k.concat(d),f.useEffect(()=>{if(b&&!y){var u={doc:t,selection:a,extensions:k},x=S?O.fromJSON(S.json,u,S.fields):O.create(u);if(v(x),!n){var D=new h({state:x,parent:b,root:w});g(D),c&&c(D,x)}}return()=>{n&&(v(void 0),g(void 0))}},[b,y]),f.useEffect(()=>A(i.container),[i.container]),f.useEffect(()=>()=>{n&&(n.destroy(),g(void 0))},[n]),f.useEffect(()=>{s&&n&&n.focus()},[s,n]),f.useEffect(()=>{n&&n.dispatch({effects:xe.reconfigure.of(k)})},[m,d,C,p,N,E,M,B,K,W,F,H,L,o,l]),f.useEffect(()=>{if(t!==void 0){var u=n?n.state.doc.toString():"";n&&t!==u&&n.dispatch({changes:{from:0,to:u.length,insert:t||""},annotations:[G.of(!0)]})}},[t,n]),{state:y,setState:v,view:n,setView:g,container:b,setContainer:A}}var Fe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],He=f.forwardRef((i,t)=>{var{className:a,value:o="",selection:r,extensions:c=[],onChange:l,onStatistics:d,onCreateEditor:s,onUpdate:m,autoFocus:C,theme:p="light",height:N,minHeight:E,maxHeight:M,width:B,minWidth:K,maxWidth:W,basicSetup:F,placeholder:H,indentWithTab:L,editable:w,readOnly:S,root:b,initialState:A}=i,n=J(i,Fe),g=f.useRef(null),{state:y,view:v,container:I}=We({container:g.current,root:b,value:o,autoFocus:C,theme:p,height:N,minHeight:E,maxHeight:M,width:B,minWidth:K,maxWidth:W,basicSetup:F,placeholder:H,indentWithTab:L,editable:w,readOnly:S,selection:r,onChange:l,onStatistics:d,onCreateEditor:s,onUpdate:m,extensions:c,initialState:A});if(f.useImperativeHandle(t,()=>({editor:g.current,state:y,view:v}),[g,I,y,v]),typeof o!="string")throw new Error("value must be typeof string but got "+typeof o);var T=typeof p=="string"?"cm-theme-"+p:"cm-theme";return P.jsx("div",z({ref:g,className:""+T+(a?" "+a:"")},n))});He.displayName="CodeMirror";var V=i=>{var{theme:t,settings:a={},styles:o=[]}=i,r={".cm-gutters":{}},c={};a.background&&(c.backgroundColor=a.background),a.backgroundImage&&(c.backgroundImage=a.backgroundImage),a.foreground&&(c.color=a.foreground),a.fontSize&&(c.fontSize=a.fontSize),(a.background||a.foreground)&&(r["&"]=c),a.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:a.fontFamily}),a.gutterBackground&&(r[".cm-gutters"].backgroundColor=a.gutterBackground),a.gutterForeground&&(r[".cm-gutters"].color=a.gutterForeground),a.gutterBorder&&(r[".cm-gutters"].borderRightColor=a.gutterBorder),a.caret&&(r[".cm-content"]={caretColor:a.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:a.caret});var l={};a.gutterActiveForeground&&(l.color=a.gutterActiveForeground),a.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:a.lineHighlight},l.backgroundColor=a.lineHighlight),r[".cm-activeLineGutter"]=l,a.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:a.selection+" !important"}),a.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:a.selectionMatch});var d=h.theme(r,{dark:t==="dark"}),s=Ne.define(o),m=[d,R(s)];return m},Le={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Ae=[{tag:[e.keyword,e.operatorKeyword,e.modifier,e.color,e.constant(e.name),e.standard(e.name),e.standard(e.tagName),e.special(e.brace),e.atom,e.bool,e.special(e.variableName)],color:"#0000ff"},{tag:[e.moduleKeyword,e.controlKeyword],color:"#af00db"},{tag:[e.name,e.deleted,e.character,e.macroName,e.propertyName,e.variableName,e.labelName,e.definition(e.name)],color:"#0070c1"},{tag:e.heading,fontWeight:"bold",color:"#0070c1"},{tag:[e.typeName,e.className,e.tagName,e.number,e.changed,e.annotation,e.self,e.namespace],color:"#267f99"},{tag:[e.function(e.variableName),e.function(e.propertyName)],color:"#795e26"},{tag:[e.number],color:"#098658"},{tag:[e.operator,e.punctuation,e.separator,e.url,e.escape,e.regexp],color:"#383a42"},{tag:[e.regexp],color:"#af00db"},{tag:[e.special(e.string),e.processingInstruction,e.string,e.inserted],color:"#a31515"},{tag:[e.angleBracket],color:"#383a42"},{tag:e.strong,fontWeight:"bold"},{tag:e.emphasis,fontStyle:"italic"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:[e.meta,e.comment],color:"#008000"},{tag:e.link,color:"#4078f2",textDecoration:"underline"},{tag:e.invalid,color:"#e45649"}];function De(i){var{theme:t="light",settings:a={},styles:o=[]}={};return V({theme:t,settings:z({},Le,a),styles:[...Ae,...o]})}De();var Oe={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},we=[{tag:[e.keyword,e.operatorKeyword,e.modifier,e.color,e.constant(e.name),e.standard(e.name),e.standard(e.tagName),e.special(e.brace),e.atom,e.bool,e.special(e.variableName)],color:"#569cd6"},{tag:[e.controlKeyword,e.moduleKeyword],color:"#c586c0"},{tag:[e.name,e.deleted,e.character,e.macroName,e.propertyName,e.variableName,e.labelName,e.definition(e.name)],color:"#9cdcfe"},{tag:e.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[e.typeName,e.className,e.tagName,e.number,e.changed,e.annotation,e.self,e.namespace],color:"#4ec9b0"},{tag:[e.function(e.variableName),e.function(e.propertyName)],color:"#dcdcaa"},{tag:[e.number],color:"#b5cea8"},{tag:[e.operator,e.punctuation,e.separator,e.url,e.escape,e.regexp],color:"#d4d4d4"},{tag:[e.regexp],color:"#d16969"},{tag:[e.special(e.string),e.processingInstruction,e.string,e.inserted],color:"#ce9178"},{tag:[e.angleBracket],color:"#808080"},{tag:e.strong,fontWeight:"bold"},{tag:e.emphasis,fontStyle:"italic"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:[e.meta,e.comment],color:"#6a9955"},{tag:e.link,color:"#6a9955",textDecoration:"underline"},{tag:e.invalid,color:"#ff0000"}];function Ie(i){var{theme:t="dark",settings:a={},styles:o=[]}={};return V({theme:t,settings:z({},Oe,a),styles:[...we,...o]})}var Re=Ie();export{He as R,Re as v};
